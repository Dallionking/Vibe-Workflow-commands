8b35a4749594edcc3e6ac0eb6a497728
"use strict";
/**
 * Context Fragment Test Suite
 * Tests for ContextFragmentFactory, TokenEstimator, and FragmentCollection
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const context_fragment_1 = require("../assembly/context-fragment");
const context_types_1 = require("../types/context.types");
(0, globals_1.describe)('ContextFragmentFactory', () => {
    let factory;
    (0, globals_1.beforeEach)(() => {
        factory = new context_fragment_1.ContextFragmentFactory();
    });
    (0, globals_1.describe)('Fragment Creation', () => {
        (0, globals_1.test)('should create basic fragment', () => {
            const fragment = factory.createFragment('global-rules', 'Test rule content', context_types_1.ContextPriority.HIGH, { source: { type: 'global', scope: 'system' } });
            (0, globals_1.expect)(fragment.id).toMatch(/global-rules-\d+-[a-z0-9]{6}/);
            (0, globals_1.expect)(fragment.type).toBe('global-rules');
            (0, globals_1.expect)(fragment.content).toBe('Test rule content');
            (0, globals_1.expect)(fragment.priority).toBe(context_types_1.ContextPriority.HIGH);
            (0, globals_1.expect)(fragment.tokenEstimate).toBeGreaterThan(0);
            (0, globals_1.expect)(fragment.validation.isValid).toBe(true);
        });
        (0, globals_1.test)('should create global fragment', () => {
            const fragment = factory.createGlobalFragment('rules', 'Global rules content', context_types_1.ContextPriority.CRITICAL);
            (0, globals_1.expect)(fragment.type).toBe('global-rules');
            (0, globals_1.expect)(fragment.metadata.source.type).toBe('global');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('global');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('rules');
            (0, globals_1.expect)(fragment.metadata.ttl).toBeUndefined(); // Global doesn't expire
        });
        (0, globals_1.test)('should create phase fragment', () => {
            const fragment = factory.createPhaseFragment(1, 'Context Engineering', 'context', 'Phase context content', context_types_1.ContextPriority.HIGH);
            (0, globals_1.expect)(fragment.type).toBe('phase-context');
            (0, globals_1.expect)(fragment.metadata.source.type).toBe('phase');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('phase');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('phase-1');
            (0, globals_1.expect)(fragment.metadata.ttl).toBe(24 * 60 * 60 * 1000); // 24 hours
        });
        (0, globals_1.test)('should create task fragment', () => {
            const fragment = factory.createTaskFragment('task-123', 'implementation', 'context', 'Task context content', context_types_1.ContextPriority.MEDIUM);
            (0, globals_1.expect)(fragment.type).toBe('task-context');
            (0, globals_1.expect)(fragment.metadata.source.type).toBe('task');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('task');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('implementation');
            (0, globals_1.expect)(fragment.metadata.ttl).toBe(60 * 60 * 1000); // 1 hour
        });
        (0, globals_1.test)('should create memory fragment', () => {
            const fragment = factory.createMemoryFragment('pattern', 'Memory pattern content', context_types_1.ContextPriority.LOW);
            (0, globals_1.expect)(fragment.type).toBe('memory-pattern');
            (0, globals_1.expect)(fragment.metadata.source.type).toBe('memory');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('memory');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('pattern');
            (0, globals_1.expect)(fragment.metadata.ttl).toBe(7 * 24 * 60 * 60 * 1000); // 7 days
        });
        (0, globals_1.test)('should create command fragment', () => {
            const fragment = factory.createCommandFragment('Read', 'file-operation', 'Command context content', context_types_1.ContextPriority.MEDIUM);
            (0, globals_1.expect)(fragment.type).toBe('command-context');
            (0, globals_1.expect)(fragment.metadata.source.type).toBe('command');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('command');
            (0, globals_1.expect)(fragment.metadata.tags).toContain('Read');
            (0, globals_1.expect)(fragment.metadata.ttl).toBe(30 * 60 * 1000); // 30 minutes
        });
    });
    (0, globals_1.describe)('Fragment Updates', () => {
        (0, globals_1.test)('should update fragment content', () => {
            const fragment = factory.createFragment('task-context', 'Original content', context_types_1.ContextPriority.MEDIUM, { source: { type: 'task', taskId: 'test', taskType: 'implementation' } });
            const originalModified = fragment.metadata.lastModified;
            const originalTokens = fragment.tokenEstimate;
            // Wait a bit to ensure timestamp difference
            setTimeout(() => {
                const updated = factory.updateFragment(fragment, 'Updated content with more text');
                (0, globals_1.expect)(updated.content).toBe('Updated content with more text');
                (0, globals_1.expect)(updated.metadata.lastModified).toBeGreaterThan(originalModified);
                (0, globals_1.expect)(updated.tokenEstimate).toBeGreaterThan(originalTokens);
                (0, globals_1.expect)(updated.validation.isValid).toBe(true);
            }, 10);
        });
    });
    (0, globals_1.describe)('Fragment Expiration', () => {
        (0, globals_1.test)('should detect expired fragments', () => {
            const fragment = factory.createFragment('task-context', 'Test content', context_types_1.ContextPriority.MEDIUM, {
                source: { type: 'task', taskId: 'test', taskType: 'implementation' },
                ttl: 100 // 100ms TTL
            });
            (0, globals_1.expect)(factory.isExpired(fragment)).toBe(false);
            // Wait for expiration
            setTimeout(() => {
                (0, globals_1.expect)(factory.isExpired(fragment)).toBe(true);
            }, 150);
        });
        (0, globals_1.test)('should not expire fragments without TTL', () => {
            const fragment = factory.createGlobalFragment('rules', 'Global rules never expire', context_types_1.ContextPriority.CRITICAL);
            (0, globals_1.expect)(factory.isExpired(fragment)).toBe(false);
        });
    });
    (0, globals_1.describe)('Fragment Compression', () => {
        (0, globals_1.test)('should compress large fragments', () => {
            const largeContent = 'This is a very long content string. '.repeat(100);
            const fragment = factory.createFragment('task-context', largeContent, context_types_1.ContextPriority.MEDIUM, { source: { type: 'task', taskId: 'test', taskType: 'implementation' } });
            const originalTokens = fragment.tokenEstimate;
            const targetTokens = Math.floor(originalTokens / 2);
            const compressed = factory.compressFragment(fragment, targetTokens);
            (0, globals_1.expect)(compressed.tokenEstimate).toBeLessThanOrEqual(targetTokens);
            (0, globals_1.expect)(compressed.content).toContain('[content compressed]');
            (0, globals_1.expect)(compressed.content.length).toBeLessThan(largeContent.length);
        });
        (0, globals_1.test)('should not compress fragments already within target', () => {
            const smallContent = 'Small content';
            const fragment = factory.createFragment('task-context', smallContent, context_types_1.ContextPriority.MEDIUM, { source: { type: 'task', taskId: 'test', taskType: 'implementation' } });
            const targetTokens = fragment.tokenEstimate + 100;
            const result = factory.compressFragment(fragment, targetTokens);
            (0, globals_1.expect)(result.content).toBe(smallContent);
            (0, globals_1.expect)(result.tokenEstimate).toBe(fragment.tokenEstimate);
        });
    });
    (0, globals_1.describe)('Fragment Validation', () => {
        (0, globals_1.test)('should validate global rules format', () => {
            const validRules = 'systematic: Always follow systematic patterns\nquality: Maintain high standards';
            const fragment = factory.createGlobalFragment('rules', validRules);
            (0, globals_1.expect)(fragment.validation.isValid).toBe(true);
            (0, globals_1.expect)(fragment.validation.errors).toHaveLength(0);
        });
        (0, globals_1.test)('should warn about missing rule patterns', () => {
            const incompleteRules = 'some rule: Just a rule without key patterns';
            const fragment = factory.createGlobalFragment('rules', incompleteRules);
            (0, globals_1.expect)(fragment.validation.isValid).toBe(true);
            (0, globals_1.expect)(fragment.validation.warnings.length).toBeGreaterThan(0);
            (0, globals_1.expect)(fragment.validation.warnings[0].code).toBe('MISSING_RULE_PATTERNS');
        });
        (0, globals_1.test)('should validate empty content', () => {
            const fragment = factory.createFragment('task-context', '', context_types_1.ContextPriority.MEDIUM, { source: { type: 'task', taskId: 'test', taskType: 'implementation' } });
            (0, globals_1.expect)(fragment.validation.isValid).toBe(false);
            (0, globals_1.expect)(fragment.validation.errors).toHaveLength(1);
            (0, globals_1.expect)(fragment.validation.errors[0].code).toBe('EMPTY_CONTENT');
        });
        (0, globals_1.test)('should warn about high token count', () => {
            const largeContent = 'Large content. '.repeat(200); // Should exceed 1000 tokens
            const fragment = factory.createFragment('task-context', largeContent, context_types_1.ContextPriority.MEDIUM, { source: { type: 'task', taskId: 'test', taskType: 'implementation' } });
            (0, globals_1.expect)(fragment.validation.warnings.some(w => w.code === 'HIGH_TOKEN_COUNT')).toBe(true);
        });
    });
});
(0, globals_1.describe)('TokenEstimator', () => {
    let estimator;
    (0, globals_1.beforeEach)(() => {
        estimator = new context_fragment_1.TokenEstimator();
    });
    (0, globals_1.describe)('Token Estimation', () => {
        (0, globals_1.test)('should estimate tokens for simple text', () => {
            const text = 'This is a simple test';
            const estimate = estimator.estimate(text);
            (0, globals_1.expect)(estimate).toBeGreaterThan(0);
            (0, globals_1.expect)(estimate).toBe(Math.ceil(text.length / 3.5));
        });
        (0, globals_1.test)('should cache token estimates', () => {
            const text = 'Cached estimation test';
            const estimate1 = estimator.estimate(text);
            const estimate2 = estimator.estimate(text);
            (0, globals_1.expect)(estimate1).toBe(estimate2);
        });
        (0, globals_1.test)('should estimate total tokens for fragments', () => {
            const fragments = [
                { tokenEstimate: 100 },
                { tokenEstimate: 150 },
                { tokenEstimate: 75 }
            ];
            const total = estimator.estimateTotal(fragments);
            (0, globals_1.expect)(total).toBe(325);
        });
        (0, globals_1.test)('should handle empty fragment array', () => {
            const total = estimator.estimateTotal([]);
            (0, globals_1.expect)(total).toBe(0);
        });
        (0, globals_1.test)('should manage cache size', () => {
            estimator.clearCache();
            // Add many items to test cache management
            for (let i = 0; i < 1100; i++) {
                estimator.estimate(`test content ${i}`);
            }
            // Cache should be managed and not grow infinitely
            (0, globals_1.expect)(true).toBe(true); // Just ensure no errors thrown
        });
        (0, globals_1.test)('should clear cache', () => {
            estimator.estimate('test content');
            estimator.clearCache();
            // After clearing, estimation should still work
            const estimate = estimator.estimate('new test content');
            (0, globals_1.expect)(estimate).toBeGreaterThan(0);
        });
    });
    (0, globals_1.describe)('Edge Cases', () => {
        (0, globals_1.test)('should handle empty string', () => {
            const estimate = estimator.estimate('');
            (0, globals_1.expect)(estimate).toBe(0);
        });
        (0, globals_1.test)('should handle very long text', () => {
            const longText = 'Very long text content. '.repeat(1000);
            const estimate = estimator.estimate(longText);
            (0, globals_1.expect)(estimate).toBeGreaterThan(1000);
            (0, globals_1.expect)(estimate).toBe(Math.ceil(longText.length / 3.5));
        });
        (0, globals_1.test)('should handle special characters', () => {
            const specialText = '!@#$%^&*()_+-={}[]|\\:";\'<>?,./';
            const estimate = estimator.estimate(specialText);
            (0, globals_1.expect)(estimate).toBeGreaterThan(0);
        });
    });
});
(0, globals_1.describe)('FragmentCollection', () => {
    let collection;
    let factory;
    (0, globals_1.beforeEach)(() => {
        collection = new context_fragment_1.FragmentCollection();
        factory = new context_fragment_1.ContextFragmentFactory();
    });
    (0, globals_1.describe)('Collection Operations', () => {
        (0, globals_1.test)('should add and retrieve fragments', () => {
            const fragment = factory.createFragment('global-rules', 'Test content', context_types_1.ContextPriority.HIGH, { source: { type: 'global', scope: 'system' } });
            collection.add(fragment);
            (0, globals_1.expect)(collection.get(fragment.id)).toBe(fragment);
            (0, globals_1.expect)(collection.size()).toBe(1);
        });
        (0, globals_1.test)('should remove fragments', () => {
            const fragment = factory.createFragment('global-rules', 'Test content', context_types_1.ContextPriority.HIGH, { source: { type: 'global', scope: 'system' } });
            collection.add(fragment);
            (0, globals_1.expect)(collection.size()).toBe(1);
            const removed = collection.remove(fragment.id);
            (0, globals_1.expect)(removed).toBe(true);
            (0, globals_1.expect)(collection.size()).toBe(0);
            (0, globals_1.expect)(collection.get(fragment.id)).toBeUndefined();
        });
        (0, globals_1.test)('should return false when removing non-existent fragment', () => {
            const removed = collection.remove('non-existent-id');
            (0, globals_1.expect)(removed).toBe(false);
        });
        (0, globals_1.test)('should get all fragments', () => {
            const fragment1 = factory.createGlobalFragment('rules', 'Content 1');
            const fragment2 = factory.createGlobalFragment('config', 'Content 2');
            collection.add(fragment1);
            collection.add(fragment2);
            const allFragments = collection.getAll();
            (0, globals_1.expect)(allFragments).toHaveLength(2);
            (0, globals_1.expect)(allFragments).toContain(fragment1);
            (0, globals_1.expect)(allFragments).toContain(fragment2);
        });
    });
    (0, globals_1.describe)('Fragment Filtering', () => {
        (0, globals_1.test)('should get fragments by type', () => {
            const globalFragment = factory.createGlobalFragment('rules', 'Global content');
            const phaseFragment = factory.createPhaseFragment(1, 'Phase 1', 'context', 'Phase content');
            collection.add(globalFragment);
            collection.add(phaseFragment);
            const globalFragments = collection.getByType('global-rules');
            (0, globals_1.expect)(globalFragments).toHaveLength(1);
            (0, globals_1.expect)(globalFragments[0]).toBe(globalFragment);
            const phaseFragments = collection.getByType('phase-context');
            (0, globals_1.expect)(phaseFragments).toHaveLength(1);
            (0, globals_1.expect)(phaseFragments[0]).toBe(phaseFragment);
        });
        (0, globals_1.test)('should get fragments by priority', () => {
            const criticalFragment = factory.createGlobalFragment('rules', 'Critical', context_types_1.ContextPriority.CRITICAL);
            const highFragment = factory.createGlobalFragment('config', 'High', context_types_1.ContextPriority.HIGH);
            const mediumFragment = factory.createTaskFragment('task-1', 'implementation', 'context', 'Medium', context_types_1.ContextPriority.MEDIUM);
            collection.add(criticalFragment);
            collection.add(highFragment);
            collection.add(mediumFragment);
            const highPriorityFragments = collection.getByPriority(context_types_1.ContextPriority.HIGH);
            (0, globals_1.expect)(highPriorityFragments).toHaveLength(2); // Critical and High
            (0, globals_1.expect)(highPriorityFragments).toContain(criticalFragment);
            (0, globals_1.expect)(highPriorityFragments).toContain(highFragment);
            (0, globals_1.expect)(highPriorityFragments).not.toContain(mediumFragment);
        });
        (0, globals_1.test)('should get fragments sorted by priority', () => {
            const mediumFragment = factory.createTaskFragment('task-1', 'implementation', 'context', 'Medium', context_types_1.ContextPriority.MEDIUM);
            const criticalFragment = factory.createGlobalFragment('rules', 'Critical', context_types_1.ContextPriority.CRITICAL);
            const highFragment = factory.createGlobalFragment('config', 'High', context_types_1.ContextPriority.HIGH);
            collection.add(mediumFragment);
            collection.add(criticalFragment);
            collection.add(highFragment);
            const sortedFragments = collection.getSortedByPriority();
            (0, globals_1.expect)(sortedFragments).toHaveLength(3);
            (0, globals_1.expect)(sortedFragments[0]).toBe(criticalFragment);
            (0, globals_1.expect)(sortedFragments[1]).toBe(highFragment);
            (0, globals_1.expect)(sortedFragments[2]).toBe(mediumFragment);
        });
    });
    (0, globals_1.describe)('Collection Maintenance', () => {
        (0, globals_1.test)('should remove expired fragments', () => {
            const expiredFragment = factory.createTaskFragment('task-1', 'implementation', 'context', 'Expired content', context_types_1.ContextPriority.MEDIUM);
            // Manually set created time to make it expired
            expiredFragment.metadata.created = Date.now() - (2 * 60 * 60 * 1000); // 2 hours ago
            expiredFragment.metadata.ttl = 60 * 60 * 1000; // 1 hour TTL
            const validFragment = factory.createGlobalFragment('rules', 'Valid content');
            collection.add(expiredFragment);
            collection.add(validFragment);
            (0, globals_1.expect)(collection.size()).toBe(2);
            const removedCount = collection.removeExpired(factory);
            (0, globals_1.expect)(removedCount).toBe(1);
            (0, globals_1.expect)(collection.size()).toBe(1);
            (0, globals_1.expect)(collection.get(validFragment.id)).toBe(validFragment);
            (0, globals_1.expect)(collection.get(expiredFragment.id)).toBeUndefined();
        });
        (0, globals_1.test)('should calculate total tokens', () => {
            const fragment1 = factory.createGlobalFragment('rules', 'Content 1');
            const fragment2 = factory.createGlobalFragment('config', 'Content 2');
            collection.add(fragment1);
            collection.add(fragment2);
            const totalTokens = collection.getTotalTokens();
            const expectedTokens = fragment1.tokenEstimate + fragment2.tokenEstimate;
            (0, globals_1.expect)(totalTokens).toBe(expectedTokens);
        });
        (0, globals_1.test)('should clear all fragments', () => {
            const fragment1 = factory.createGlobalFragment('rules', 'Content 1');
            const fragment2 = factory.createGlobalFragment('config', 'Content 2');
            collection.add(fragment1);
            collection.add(fragment2);
            (0, globals_1.expect)(collection.size()).toBe(2);
            collection.clear();
            (0, globals_1.expect)(collection.size()).toBe(0);
            (0, globals_1.expect)(collection.getAll()).toHaveLength(0);
        });
    });
    (0, globals_1.describe)('Edge Cases', () => {
        (0, globals_1.test)('should handle empty collection operations', () => {
            (0, globals_1.expect)(collection.size()).toBe(0);
            (0, globals_1.expect)(collection.getAll()).toHaveLength(0);
            (0, globals_1.expect)(collection.getByType('global-rules')).toHaveLength(0);
            (0, globals_1.expect)(collection.getByPriority(context_types_1.ContextPriority.HIGH)).toHaveLength(0);
            (0, globals_1.expect)(collection.getTotalTokens()).toBe(0);
            (0, globals_1.expect)(collection.removeExpired(factory)).toBe(0);
        });
        (0, globals_1.test)('should handle duplicate additions', () => {
            const fragment = factory.createGlobalFragment('rules', 'Test content');
            collection.add(fragment);
            collection.add(fragment); // Add same fragment again
            (0, globals_1.expect)(collection.size()).toBe(1); // Should still be 1, not 2
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2RhbGxpb25raW5nL1ZpYmUgUHJvamVjdHMvVmliZSBXb3JrZmxvdyBjb21tYW5kcyAvY29udGV4dC9fX3Rlc3RzX18vY29udGV4dC1mcmFnbWVudC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBRUgsMkNBQW1FO0FBQ25FLG1FQUlzQztBQUN0QywwREFBOEU7QUFFOUUsSUFBQSxrQkFBUSxFQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtJQUN0QyxJQUFJLE9BQStCLENBQUM7SUFFcEMsSUFBQSxvQkFBVSxFQUFDLEdBQUcsRUFBRTtRQUNkLE9BQU8sR0FBRyxJQUFJLHlDQUFzQixFQUFFLENBQUM7SUFDekMsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLGtCQUFRLEVBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFO1FBQ2pDLElBQUEsY0FBSSxFQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtZQUN4QyxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUNyQyxjQUFjLEVBQ2QsbUJBQW1CLEVBQ25CLCtCQUFlLENBQUMsSUFBSSxFQUNwQixFQUFFLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxFQUFFLENBQ2hELENBQUM7WUFFRixJQUFBLGdCQUFNLEVBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO1lBQzVELElBQUEsZ0JBQU0sRUFBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzNDLElBQUEsZ0JBQU0sRUFBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDbkQsSUFBQSxnQkFBTSxFQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsK0JBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNyRCxJQUFBLGdCQUFNLEVB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RSxjQUFjLENBQUMsQ0FBQztZQUV2RSxVQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pCLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQywwQkFBMEI7WUFFcEQsSUFBQSxnQkFBTSxFQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLDJCQUEyQjtRQUNoRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2RhbGxpb25raW5nL1ZpYmUgUHJvamVjdHMvVmliZSBXb3JrZmxvdyBjb21tYW5kcyAvY29udGV4dC9fX3Rlc3RzX18vY29udGV4dC1mcmFnbWVudC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29udGV4dCBGcmFnbWVudCBUZXN0IFN1aXRlXG4gKiBUZXN0cyBmb3IgQ29udGV4dEZyYWdtZW50RmFjdG9yeSwgVG9rZW5Fc3RpbWF0b3IsIGFuZCBGcmFnbWVudENvbGxlY3Rpb25cbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgdGVzdCwgZXhwZWN0LCBiZWZvcmVFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBcbiAgQ29udGV4dEZyYWdtZW50RmFjdG9yeSwgXG4gIFRva2VuRXN0aW1hdG9yLCBcbiAgRnJhZ21lbnRDb2xsZWN0aW9uIFxufSBmcm9tICcuLi9hc3NlbWJseS9jb250ZXh0LWZyYWdtZW50JztcbmltcG9ydCB7IENvbnRleHRQcmlvcml0eSwgQ29udGV4dEZyYWdtZW50VHlwZSB9IGZyb20gJy4uL3R5cGVzL2NvbnRleHQudHlwZXMnO1xuXG5kZXNjcmliZSgnQ29udGV4dEZyYWdtZW50RmFjdG9yeScsICgpID0+IHtcbiAgbGV0IGZhY3Rvcnk6IENvbnRleHRGcmFnbWVudEZhY3Rvcnk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgZmFjdG9yeSA9IG5ldyBDb250ZXh0RnJhZ21lbnRGYWN0b3J5KCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGcmFnbWVudCBDcmVhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGJhc2ljIGZyYWdtZW50JywgKCkgPT4ge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUZyYWdtZW50KFxuICAgICAgICAnZ2xvYmFsLXJ1bGVzJyxcbiAgICAgICAgJ1Rlc3QgcnVsZSBjb250ZW50JyxcbiAgICAgICAgQ29udGV4dFByaW9yaXR5LkhJR0gsXG4gICAgICAgIHsgc291cmNlOiB7IHR5cGU6ICdnbG9iYWwnLCBzY29wZTogJ3N5c3RlbScgfSB9XG4gICAgICApO1xuXG4gICAgICBleHBlY3QoZnJhZ21lbnQuaWQpLnRvTWF0Y2goL2dsb2JhbC1ydWxlcy1cXGQrLVthLXowLTldezZ9Lyk7XG4gICAgICBleHBlY3QoZnJhZ21lbnQudHlwZSkudG9CZSgnZ2xvYmFsLXJ1bGVzJyk7XG4gICAgICBleHBlY3QoZnJhZ21lbnQuY29udGVudCkudG9CZSgnVGVzdCBydWxlIGNvbnRlbnQnKTtcbiAgICAgIGV4cGVjdChmcmFnbWVudC5wcmlvcml0eSkudG9CZShDb250ZXh0UHJpb3JpdHkuSElHSCk7XG4gICAgICBleHBlY3QoZnJhZ21lbnQudG9rZW5Fc3RpbWF0ZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGZyYWdtZW50LnZhbGlkYXRpb24uaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgZ2xvYmFsIGZyYWdtZW50JywgKCkgPT4ge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUdsb2JhbEZyYWdtZW50KFxuICAgICAgICAncnVsZXMnLFxuICAgICAgICAnR2xvYmFsIHJ1bGVzIGNvbnRlbnQnLFxuICAgICAgICBDb250ZXh0UHJpb3JpdHkuQ1JJVElDQUxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChmcmFnbWVudC50eXBlKS50b0JlKCdnbG9iYWwtcnVsZXMnKTtcbiAgICAgIGV4cGVjdChmcmFnbWVudC5tZXRhZGF0YS5zb3VyY2UudHlwZSkudG9CZSgnZ2xvYmFsJyk7XG4gICAgICBleHBlY3QoZnJhZ21lbnQubWV0YWRhdGEudGFncykudG9Db250YWluKCdnbG9iYWwnKTtcbiAgICAgIGV4cGVjdChmcmFnbWVudC5tZXRhZGF0YS50YWdzKS50b0NvbnRhaW4oJ3J1bGVzJyk7XG4gICAgICBleHBlY3QoZnJhZ21lbnQubWV0YWRhdGEudHRsKS50b0JlVW5kZWZpbmVkKCk7IC8vIEdsb2JhbCBkb2Vzbid0IGV4cGlyZVxuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBwaGFzZSBmcmFnbWVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGZyYWdtZW50ID0gZmFjdG9yeS5jcmVhdGVQaGFzZUZyYWdtZW50KFxuICAgICAgICAxLFxuICAgICAgICAnQ29udGV4dCBFbmdpbmVlcmluZycsXG4gICAgICAgICdjb250ZXh0JyxcbiAgICAgICAgJ1BoYXNlIGNvbnRleHQgY29udGVudCcsXG4gICAgICAgIENvbnRleHRQcmlvcml0eS5ISUdIXG4gICAgICApO1xuXG4gICAgICBleHBlY3QoZnJhZ21lbnQudHlwZSkudG9CZSgncGhhc2UtY29udGV4dCcpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50Lm1ldGFkYXRhLnNvdXJjZS50eXBlKS50b0JlKCdwaGFzZScpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50Lm1ldGFkYXRhLnRhZ3MpLnRvQ29udGFpbigncGhhc2UnKTtcbiAgICAgIGV4cGVjdChmcmFnbWVudC5tZXRhZGF0YS50YWdzKS50b0NvbnRhaW4oJ3BoYXNlLTEnKTtcbiAgICAgIGV4cGVjdChmcmFnbWVudC5tZXRhZGF0YS50dGwpLnRvQmUoMjQgKiA2MCAqIDYwICogMTAwMCk7IC8vIDI0IGhvdXJzXG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIHRhc2sgZnJhZ21lbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGZhY3RvcnkuY3JlYXRlVGFza0ZyYWdtZW50KFxuICAgICAgICAndGFzay0xMjMnLFxuICAgICAgICAnaW1wbGVtZW50YXRpb24nLFxuICAgICAgICAnY29udGV4dCcsXG4gICAgICAgICdUYXNrIGNvbnRleHQgY29udGVudCcsXG4gICAgICAgIENvbnRleHRQcmlvcml0eS5NRURJVU1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChmcmFnbWVudC50eXBlKS50b0JlKCd0YXNrLWNvbnRleHQnKTtcbiAgICAgIGV4cGVjdChmcmFnbWVudC5tZXRhZGF0YS5zb3VyY2UudHlwZSkudG9CZSgndGFzaycpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50Lm1ldGFkYXRhLnRhZ3MpLnRvQ29udGFpbigndGFzaycpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50Lm1ldGFkYXRhLnRhZ3MpLnRvQ29udGFpbignaW1wbGVtZW50YXRpb24nKTtcbiAgICAgIGV4cGVjdChmcmFnbWVudC5tZXRhZGF0YS50dGwpLnRvQmUoNjAgKiA2MCAqIDEwMDApOyAvLyAxIGhvdXJcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgbWVtb3J5IGZyYWdtZW50JywgKCkgPT4ge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZU1lbW9yeUZyYWdtZW50KFxuICAgICAgICAncGF0dGVybicsXG4gICAgICAgICdNZW1vcnkgcGF0dGVybiBjb250ZW50JyxcbiAgICAgICAgQ29udGV4dFByaW9yaXR5LkxPV1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KGZyYWdtZW50LnR5cGUpLnRvQmUoJ21lbW9yeS1wYXR0ZXJuJyk7XG4gICAgICBleHBlY3QoZnJhZ21lbnQubWV0YWRhdGEuc291cmNlLnR5cGUpLnRvQmUoJ21lbW9yeScpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50Lm1ldGFkYXRhLnRhZ3MpLnRvQ29udGFpbignbWVtb3J5Jyk7XG4gICAgICBleHBlY3QoZnJhZ21lbnQubWV0YWRhdGEudGFncykudG9Db250YWluKCdwYXR0ZXJuJyk7XG4gICAgICBleHBlY3QoZnJhZ21lbnQubWV0YWRhdGEudHRsKS50b0JlKDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsgLy8gNyBkYXlzXG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGNvbW1hbmQgZnJhZ21lbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGZhY3RvcnkuY3JlYXRlQ29tbWFuZEZyYWdtZW50KFxuICAgICAgICAnUmVhZCcsXG4gICAgICAgICdmaWxlLW9wZXJhdGlvbicsXG4gICAgICAgICdDb21tYW5kIGNvbnRleHQgY29udGVudCcsXG4gICAgICAgIENvbnRleHRQcmlvcml0eS5NRURJVU1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChmcmFnbWVudC50eXBlKS50b0JlKCdjb21tYW5kLWNvbnRleHQnKTtcbiAgICAgIGV4cGVjdChmcmFnbWVudC5tZXRhZGF0YS5zb3VyY2UudHlwZSkudG9CZSgnY29tbWFuZCcpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50Lm1ldGFkYXRhLnRhZ3MpLnRvQ29udGFpbignY29tbWFuZCcpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50Lm1ldGFkYXRhLnRhZ3MpLnRvQ29udGFpbignUmVhZCcpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50Lm1ldGFkYXRhLnR0bCkudG9CZSgzMCAqIDYwICogMTAwMCk7IC8vIDMwIG1pbnV0ZXNcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZyYWdtZW50IFVwZGF0ZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHVwZGF0ZSBmcmFnbWVudCBjb250ZW50JywgKCkgPT4ge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUZyYWdtZW50KFxuICAgICAgICAndGFzay1jb250ZXh0JyxcbiAgICAgICAgJ09yaWdpbmFsIGNvbnRlbnQnLFxuICAgICAgICBDb250ZXh0UHJpb3JpdHkuTUVESVVNLFxuICAgICAgICB7IHNvdXJjZTogeyB0eXBlOiAndGFzaycsIHRhc2tJZDogJ3Rlc3QnLCB0YXNrVHlwZTogJ2ltcGxlbWVudGF0aW9uJyB9IH1cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG9yaWdpbmFsTW9kaWZpZWQgPSBmcmFnbWVudC5tZXRhZGF0YS5sYXN0TW9kaWZpZWQ7XG4gICAgICBjb25zdCBvcmlnaW5hbFRva2VucyA9IGZyYWdtZW50LnRva2VuRXN0aW1hdGU7XG5cbiAgICAgIC8vIFdhaXQgYSBiaXQgdG8gZW5zdXJlIHRpbWVzdGFtcCBkaWZmZXJlbmNlXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IGZhY3RvcnkudXBkYXRlRnJhZ21lbnQoZnJhZ21lbnQsICdVcGRhdGVkIGNvbnRlbnQgd2l0aCBtb3JlIHRleHQnKTtcblxuICAgICAgICBleHBlY3QodXBkYXRlZC5jb250ZW50KS50b0JlKCdVcGRhdGVkIGNvbnRlbnQgd2l0aCBtb3JlIHRleHQnKTtcbiAgICAgICAgZXhwZWN0KHVwZGF0ZWQubWV0YWRhdGEubGFzdE1vZGlmaWVkKS50b0JlR3JlYXRlclRoYW4ob3JpZ2luYWxNb2RpZmllZCk7XG4gICAgICAgIGV4cGVjdCh1cGRhdGVkLnRva2VuRXN0aW1hdGUpLnRvQmVHcmVhdGVyVGhhbihvcmlnaW5hbFRva2Vucyk7XG4gICAgICAgIGV4cGVjdCh1cGRhdGVkLnZhbGlkYXRpb24uaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIH0sIDEwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZyYWdtZW50IEV4cGlyYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGRldGVjdCBleHBpcmVkIGZyYWdtZW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGZyYWdtZW50ID0gZmFjdG9yeS5jcmVhdGVGcmFnbWVudChcbiAgICAgICAgJ3Rhc2stY29udGV4dCcsXG4gICAgICAgICdUZXN0IGNvbnRlbnQnLFxuICAgICAgICBDb250ZXh0UHJpb3JpdHkuTUVESVVNLFxuICAgICAgICB7IFxuICAgICAgICAgIHNvdXJjZTogeyB0eXBlOiAndGFzaycsIHRhc2tJZDogJ3Rlc3QnLCB0YXNrVHlwZTogJ2ltcGxlbWVudGF0aW9uJyB9LFxuICAgICAgICAgIHR0bDogMTAwIC8vIDEwMG1zIFRUTFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBleHBlY3QoZmFjdG9yeS5pc0V4cGlyZWQoZnJhZ21lbnQpKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gV2FpdCBmb3IgZXhwaXJhdGlvblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGV4cGVjdChmYWN0b3J5LmlzRXhwaXJlZChmcmFnbWVudCkpLnRvQmUodHJ1ZSk7XG4gICAgICB9LCAxNTApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG5vdCBleHBpcmUgZnJhZ21lbnRzIHdpdGhvdXQgVFRMJywgKCkgPT4ge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUdsb2JhbEZyYWdtZW50KFxuICAgICAgICAncnVsZXMnLFxuICAgICAgICAnR2xvYmFsIHJ1bGVzIG5ldmVyIGV4cGlyZScsXG4gICAgICAgIENvbnRleHRQcmlvcml0eS5DUklUSUNBTFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KGZhY3RvcnkuaXNFeHBpcmVkKGZyYWdtZW50KSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGcmFnbWVudCBDb21wcmVzc2lvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY29tcHJlc3MgbGFyZ2UgZnJhZ21lbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGFyZ2VDb250ZW50ID0gJ1RoaXMgaXMgYSB2ZXJ5IGxvbmcgY29udGVudCBzdHJpbmcuICcucmVwZWF0KDEwMCk7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGZhY3RvcnkuY3JlYXRlRnJhZ21lbnQoXG4gICAgICAgICd0YXNrLWNvbnRleHQnLFxuICAgICAgICBsYXJnZUNvbnRlbnQsXG4gICAgICAgIENvbnRleHRQcmlvcml0eS5NRURJVU0sXG4gICAgICAgIHsgc291cmNlOiB7IHR5cGU6ICd0YXNrJywgdGFza0lkOiAndGVzdCcsIHRhc2tUeXBlOiAnaW1wbGVtZW50YXRpb24nIH0gfVxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3JpZ2luYWxUb2tlbnMgPSBmcmFnbWVudC50b2tlbkVzdGltYXRlO1xuICAgICAgY29uc3QgdGFyZ2V0VG9rZW5zID0gTWF0aC5mbG9vcihvcmlnaW5hbFRva2VucyAvIDIpO1xuXG4gICAgICBjb25zdCBjb21wcmVzc2VkID0gZmFjdG9yeS5jb21wcmVzc0ZyYWdtZW50KGZyYWdtZW50LCB0YXJnZXRUb2tlbnMpO1xuXG4gICAgICBleHBlY3QoY29tcHJlc3NlZC50b2tlbkVzdGltYXRlKS50b0JlTGVzc1RoYW5PckVxdWFsKHRhcmdldFRva2Vucyk7XG4gICAgICBleHBlY3QoY29tcHJlc3NlZC5jb250ZW50KS50b0NvbnRhaW4oJ1tjb250ZW50IGNvbXByZXNzZWRdJyk7XG4gICAgICBleHBlY3QoY29tcHJlc3NlZC5jb250ZW50Lmxlbmd0aCkudG9CZUxlc3NUaGFuKGxhcmdlQ29udGVudC5sZW5ndGgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG5vdCBjb21wcmVzcyBmcmFnbWVudHMgYWxyZWFkeSB3aXRoaW4gdGFyZ2V0JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc21hbGxDb250ZW50ID0gJ1NtYWxsIGNvbnRlbnQnO1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUZyYWdtZW50KFxuICAgICAgICAndGFzay1jb250ZXh0JyxcbiAgICAgICAgc21hbGxDb250ZW50LFxuICAgICAgICBDb250ZXh0UHJpb3JpdHkuTUVESVVNLFxuICAgICAgICB7IHNvdXJjZTogeyB0eXBlOiAndGFzaycsIHRhc2tJZDogJ3Rlc3QnLCB0YXNrVHlwZTogJ2ltcGxlbWVudGF0aW9uJyB9IH1cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHRhcmdldFRva2VucyA9IGZyYWdtZW50LnRva2VuRXN0aW1hdGUgKyAxMDA7XG4gICAgICBjb25zdCByZXN1bHQgPSBmYWN0b3J5LmNvbXByZXNzRnJhZ21lbnQoZnJhZ21lbnQsIHRhcmdldFRva2Vucyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGVudCkudG9CZShzbWFsbENvbnRlbnQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC50b2tlbkVzdGltYXRlKS50b0JlKGZyYWdtZW50LnRva2VuRXN0aW1hdGUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRnJhZ21lbnQgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgZ2xvYmFsIHJ1bGVzIGZvcm1hdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkUnVsZXMgPSAnc3lzdGVtYXRpYzogQWx3YXlzIGZvbGxvdyBzeXN0ZW1hdGljIHBhdHRlcm5zXFxucXVhbGl0eTogTWFpbnRhaW4gaGlnaCBzdGFuZGFyZHMnO1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUdsb2JhbEZyYWdtZW50KCdydWxlcycsIHZhbGlkUnVsZXMpO1xuXG4gICAgICBleHBlY3QoZnJhZ21lbnQudmFsaWRhdGlvbi5pc1ZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50LnZhbGlkYXRpb24uZXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgd2FybiBhYm91dCBtaXNzaW5nIHJ1bGUgcGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbmNvbXBsZXRlUnVsZXMgPSAnc29tZSBydWxlOiBKdXN0IGEgcnVsZSB3aXRob3V0IGtleSBwYXR0ZXJucyc7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGZhY3RvcnkuY3JlYXRlR2xvYmFsRnJhZ21lbnQoJ3J1bGVzJywgaW5jb21wbGV0ZVJ1bGVzKTtcblxuICAgICAgZXhwZWN0KGZyYWdtZW50LnZhbGlkYXRpb24uaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChmcmFnbWVudC52YWxpZGF0aW9uLndhcm5pbmdzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGZyYWdtZW50LnZhbGlkYXRpb24ud2FybmluZ3NbMF0uY29kZSkudG9CZSgnTUlTU0lOR19SVUxFX1BBVFRFUk5TJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgZW1wdHkgY29udGVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGZyYWdtZW50ID0gZmFjdG9yeS5jcmVhdGVGcmFnbWVudChcbiAgICAgICAgJ3Rhc2stY29udGV4dCcsXG4gICAgICAgICcnLFxuICAgICAgICBDb250ZXh0UHJpb3JpdHkuTUVESVVNLFxuICAgICAgICB7IHNvdXJjZTogeyB0eXBlOiAndGFzaycsIHRhc2tJZDogJ3Rlc3QnLCB0YXNrVHlwZTogJ2ltcGxlbWVudGF0aW9uJyB9IH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChmcmFnbWVudC52YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGZyYWdtZW50LnZhbGlkYXRpb24uZXJyb3JzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoZnJhZ21lbnQudmFsaWRhdGlvbi5lcnJvcnNbMF0uY29kZSkudG9CZSgnRU1QVFlfQ09OVEVOVCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHdhcm4gYWJvdXQgaGlnaCB0b2tlbiBjb3VudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGxhcmdlQ29udGVudCA9ICdMYXJnZSBjb250ZW50LiAnLnJlcGVhdCgyMDApOyAvLyBTaG91bGQgZXhjZWVkIDEwMDAgdG9rZW5zXG4gICAgICBjb25zdCBmcmFnbWVudCA9IGZhY3RvcnkuY3JlYXRlRnJhZ21lbnQoXG4gICAgICAgICd0YXNrLWNvbnRleHQnLFxuICAgICAgICBsYXJnZUNvbnRlbnQsXG4gICAgICAgIENvbnRleHRQcmlvcml0eS5NRURJVU0sXG4gICAgICAgIHsgc291cmNlOiB7IHR5cGU6ICd0YXNrJywgdGFza0lkOiAndGVzdCcsIHRhc2tUeXBlOiAnaW1wbGVtZW50YXRpb24nIH0gfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KGZyYWdtZW50LnZhbGlkYXRpb24ud2FybmluZ3Muc29tZSh3ID0+IHcuY29kZSA9PT0gJ0hJR0hfVE9LRU5fQ09VTlQnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ1Rva2VuRXN0aW1hdG9yJywgKCkgPT4ge1xuICBsZXQgZXN0aW1hdG9yOiBUb2tlbkVzdGltYXRvcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBlc3RpbWF0b3IgPSBuZXcgVG9rZW5Fc3RpbWF0b3IoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rva2VuIEVzdGltYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGVzdGltYXRlIHRva2VucyBmb3Igc2ltcGxlIHRleHQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXh0ID0gJ1RoaXMgaXMgYSBzaW1wbGUgdGVzdCc7XG4gICAgICBjb25zdCBlc3RpbWF0ZSA9IGVzdGltYXRvci5lc3RpbWF0ZSh0ZXh0KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGVzdGltYXRlKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZXN0aW1hdGUpLnRvQmUoTWF0aC5jZWlsKHRleHQubGVuZ3RoIC8gMy41KSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY2FjaGUgdG9rZW4gZXN0aW1hdGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGV4dCA9ICdDYWNoZWQgZXN0aW1hdGlvbiB0ZXN0JztcbiAgICAgIFxuICAgICAgY29uc3QgZXN0aW1hdGUxID0gZXN0aW1hdG9yLmVzdGltYXRlKHRleHQpO1xuICAgICAgY29uc3QgZXN0aW1hdGUyID0gZXN0aW1hdG9yLmVzdGltYXRlKHRleHQpO1xuICAgICAgXG4gICAgICBleHBlY3QoZXN0aW1hdGUxKS50b0JlKGVzdGltYXRlMik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZXN0aW1hdGUgdG90YWwgdG9rZW5zIGZvciBmcmFnbWVudHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmcmFnbWVudHMgPSBbXG4gICAgICAgIHsgdG9rZW5Fc3RpbWF0ZTogMTAwIH0sXG4gICAgICAgIHsgdG9rZW5Fc3RpbWF0ZTogMTUwIH0sXG4gICAgICAgIHsgdG9rZW5Fc3RpbWF0ZTogNzUgfVxuICAgICAgXSBhcyBhbnlbXTtcblxuICAgICAgY29uc3QgdG90YWwgPSBlc3RpbWF0b3IuZXN0aW1hdGVUb3RhbChmcmFnbWVudHMpO1xuICAgICAgZXhwZWN0KHRvdGFsKS50b0JlKDMyNSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGZyYWdtZW50IGFycmF5JywgKCkgPT4ge1xuICAgICAgY29uc3QgdG90YWwgPSBlc3RpbWF0b3IuZXN0aW1hdGVUb3RhbChbXSk7XG4gICAgICBleHBlY3QodG90YWwpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbWFuYWdlIGNhY2hlIHNpemUnLCAoKSA9PiB7XG4gICAgICBlc3RpbWF0b3IuY2xlYXJDYWNoZSgpO1xuICAgICAgXG4gICAgICAvLyBBZGQgbWFueSBpdGVtcyB0byB0ZXN0IGNhY2hlIG1hbmFnZW1lbnRcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTEwMDsgaSsrKSB7XG4gICAgICAgIGVzdGltYXRvci5lc3RpbWF0ZShgdGVzdCBjb250ZW50ICR7aX1gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2FjaGUgc2hvdWxkIGJlIG1hbmFnZWQgYW5kIG5vdCBncm93IGluZmluaXRlbHlcbiAgICAgIGV4cGVjdCh0cnVlKS50b0JlKHRydWUpOyAvLyBKdXN0IGVuc3VyZSBubyBlcnJvcnMgdGhyb3duXG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY2xlYXIgY2FjaGUnLCAoKSA9PiB7XG4gICAgICBlc3RpbWF0b3IuZXN0aW1hdGUoJ3Rlc3QgY29udGVudCcpO1xuICAgICAgZXN0aW1hdG9yLmNsZWFyQ2FjaGUoKTtcbiAgICAgIFxuICAgICAgLy8gQWZ0ZXIgY2xlYXJpbmcsIGVzdGltYXRpb24gc2hvdWxkIHN0aWxsIHdvcmtcbiAgICAgIGNvbnN0IGVzdGltYXRlID0gZXN0aW1hdG9yLmVzdGltYXRlKCduZXcgdGVzdCBjb250ZW50Jyk7XG4gICAgICBleHBlY3QoZXN0aW1hdGUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlc3RpbWF0ZSA9IGVzdGltYXRvci5lc3RpbWF0ZSgnJyk7XG4gICAgICBleHBlY3QoZXN0aW1hdGUpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHZlcnkgbG9uZyB0ZXh0JywgKCkgPT4ge1xuICAgICAgY29uc3QgbG9uZ1RleHQgPSAnVmVyeSBsb25nIHRleHQgY29udGVudC4gJy5yZXBlYXQoMTAwMCk7XG4gICAgICBjb25zdCBlc3RpbWF0ZSA9IGVzdGltYXRvci5lc3RpbWF0ZShsb25nVGV4dCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChlc3RpbWF0ZSkudG9CZUdyZWF0ZXJUaGFuKDEwMDApO1xuICAgICAgZXhwZWN0KGVzdGltYXRlKS50b0JlKE1hdGguY2VpbChsb25nVGV4dC5sZW5ndGggLyAzLjUpKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc3BlY2lhbCBjaGFyYWN0ZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3BlY2lhbFRleHQgPSAnIUAjJCVeJiooKV8rLT17fVtdfFxcXFw6XCI7XFwnPD4/LC4vJztcbiAgICAgIGNvbnN0IGVzdGltYXRlID0gZXN0aW1hdG9yLmVzdGltYXRlKHNwZWNpYWxUZXh0KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGVzdGltYXRlKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdGcmFnbWVudENvbGxlY3Rpb24nLCAoKSA9PiB7XG4gIGxldCBjb2xsZWN0aW9uOiBGcmFnbWVudENvbGxlY3Rpb247XG4gIGxldCBmYWN0b3J5OiBDb250ZXh0RnJhZ21lbnRGYWN0b3J5O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNvbGxlY3Rpb24gPSBuZXcgRnJhZ21lbnRDb2xsZWN0aW9uKCk7XG4gICAgZmFjdG9yeSA9IG5ldyBDb250ZXh0RnJhZ21lbnRGYWN0b3J5KCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb2xsZWN0aW9uIE9wZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGFkZCBhbmQgcmV0cmlldmUgZnJhZ21lbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUZyYWdtZW50KFxuICAgICAgICAnZ2xvYmFsLXJ1bGVzJyxcbiAgICAgICAgJ1Rlc3QgY29udGVudCcsXG4gICAgICAgIENvbnRleHRQcmlvcml0eS5ISUdILFxuICAgICAgICB7IHNvdXJjZTogeyB0eXBlOiAnZ2xvYmFsJywgc2NvcGU6ICdzeXN0ZW0nIH0gfVxuICAgICAgKTtcblxuICAgICAgY29sbGVjdGlvbi5hZGQoZnJhZ21lbnQpO1xuICAgICAgXG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXQoZnJhZ21lbnQuaWQpKS50b0JlKGZyYWdtZW50KTtcbiAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnNpemUoKSkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZW1vdmUgZnJhZ21lbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUZyYWdtZW50KFxuICAgICAgICAnZ2xvYmFsLXJ1bGVzJyxcbiAgICAgICAgJ1Rlc3QgY29udGVudCcsXG4gICAgICAgIENvbnRleHRQcmlvcml0eS5ISUdILFxuICAgICAgICB7IHNvdXJjZTogeyB0eXBlOiAnZ2xvYmFsJywgc2NvcGU6ICdzeXN0ZW0nIH0gfVxuICAgICAgKTtcblxuICAgICAgY29sbGVjdGlvbi5hZGQoZnJhZ21lbnQpO1xuICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uc2l6ZSgpKS50b0JlKDEpO1xuXG4gICAgICBjb25zdCByZW1vdmVkID0gY29sbGVjdGlvbi5yZW1vdmUoZnJhZ21lbnQuaWQpO1xuICAgICAgZXhwZWN0KHJlbW92ZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5zaXplKCkpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXQoZnJhZ21lbnQuaWQpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gcmVtb3Zpbmcgbm9uLWV4aXN0ZW50IGZyYWdtZW50JywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVtb3ZlZCA9IGNvbGxlY3Rpb24ucmVtb3ZlKCdub24tZXhpc3RlbnQtaWQnKTtcbiAgICAgIGV4cGVjdChyZW1vdmVkKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBnZXQgYWxsIGZyYWdtZW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGZyYWdtZW50MSA9IGZhY3RvcnkuY3JlYXRlR2xvYmFsRnJhZ21lbnQoJ3J1bGVzJywgJ0NvbnRlbnQgMScpO1xuICAgICAgY29uc3QgZnJhZ21lbnQyID0gZmFjdG9yeS5jcmVhdGVHbG9iYWxGcmFnbWVudCgnY29uZmlnJywgJ0NvbnRlbnQgMicpO1xuXG4gICAgICBjb2xsZWN0aW9uLmFkZChmcmFnbWVudDEpO1xuICAgICAgY29sbGVjdGlvbi5hZGQoZnJhZ21lbnQyKTtcblxuICAgICAgY29uc3QgYWxsRnJhZ21lbnRzID0gY29sbGVjdGlvbi5nZXRBbGwoKTtcbiAgICAgIGV4cGVjdChhbGxGcmFnbWVudHMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChhbGxGcmFnbWVudHMpLnRvQ29udGFpbihmcmFnbWVudDEpO1xuICAgICAgZXhwZWN0KGFsbEZyYWdtZW50cykudG9Db250YWluKGZyYWdtZW50Mik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGcmFnbWVudCBGaWx0ZXJpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGdldCBmcmFnbWVudHMgYnkgdHlwZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGdsb2JhbEZyYWdtZW50ID0gZmFjdG9yeS5jcmVhdGVHbG9iYWxGcmFnbWVudCgncnVsZXMnLCAnR2xvYmFsIGNvbnRlbnQnKTtcbiAgICAgIGNvbnN0IHBoYXNlRnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZVBoYXNlRnJhZ21lbnQoMSwgJ1BoYXNlIDEnLCAnY29udGV4dCcsICdQaGFzZSBjb250ZW50Jyk7XG5cbiAgICAgIGNvbGxlY3Rpb24uYWRkKGdsb2JhbEZyYWdtZW50KTtcbiAgICAgIGNvbGxlY3Rpb24uYWRkKHBoYXNlRnJhZ21lbnQpO1xuXG4gICAgICBjb25zdCBnbG9iYWxGcmFnbWVudHMgPSBjb2xsZWN0aW9uLmdldEJ5VHlwZSgnZ2xvYmFsLXJ1bGVzJyk7XG4gICAgICBleHBlY3QoZ2xvYmFsRnJhZ21lbnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoZ2xvYmFsRnJhZ21lbnRzWzBdKS50b0JlKGdsb2JhbEZyYWdtZW50KTtcblxuICAgICAgY29uc3QgcGhhc2VGcmFnbWVudHMgPSBjb2xsZWN0aW9uLmdldEJ5VHlwZSgncGhhc2UtY29udGV4dCcpO1xuICAgICAgZXhwZWN0KHBoYXNlRnJhZ21lbnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocGhhc2VGcmFnbWVudHNbMF0pLnRvQmUocGhhc2VGcmFnbWVudCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZ2V0IGZyYWdtZW50cyBieSBwcmlvcml0eScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNyaXRpY2FsRnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUdsb2JhbEZyYWdtZW50KCdydWxlcycsICdDcml0aWNhbCcsIENvbnRleHRQcmlvcml0eS5DUklUSUNBTCk7XG4gICAgICBjb25zdCBoaWdoRnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZUdsb2JhbEZyYWdtZW50KCdjb25maWcnLCAnSGlnaCcsIENvbnRleHRQcmlvcml0eS5ISUdIKTtcbiAgICAgIGNvbnN0IG1lZGl1bUZyYWdtZW50ID0gZmFjdG9yeS5jcmVhdGVUYXNrRnJhZ21lbnQoJ3Rhc2stMScsICdpbXBsZW1lbnRhdGlvbicsICdjb250ZXh0JywgJ01lZGl1bScsIENvbnRleHRQcmlvcml0eS5NRURJVU0pO1xuXG4gICAgICBjb2xsZWN0aW9uLmFkZChjcml0aWNhbEZyYWdtZW50KTtcbiAgICAgIGNvbGxlY3Rpb24uYWRkKGhpZ2hGcmFnbWVudCk7XG4gICAgICBjb2xsZWN0aW9uLmFkZChtZWRpdW1GcmFnbWVudCk7XG5cbiAgICAgIGNvbnN0IGhpZ2hQcmlvcml0eUZyYWdtZW50cyA9IGNvbGxlY3Rpb24uZ2V0QnlQcmlvcml0eShDb250ZXh0UHJpb3JpdHkuSElHSCk7XG4gICAgICBleHBlY3QoaGlnaFByaW9yaXR5RnJhZ21lbnRzKS50b0hhdmVMZW5ndGgoMik7IC8vIENyaXRpY2FsIGFuZCBIaWdoXG4gICAgICBleHBlY3QoaGlnaFByaW9yaXR5RnJhZ21lbnRzKS50b0NvbnRhaW4oY3JpdGljYWxGcmFnbWVudCk7XG4gICAgICBleHBlY3QoaGlnaFByaW9yaXR5RnJhZ21lbnRzKS50b0NvbnRhaW4oaGlnaEZyYWdtZW50KTtcbiAgICAgIGV4cGVjdChoaWdoUHJpb3JpdHlGcmFnbWVudHMpLm5vdC50b0NvbnRhaW4obWVkaXVtRnJhZ21lbnQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGdldCBmcmFnbWVudHMgc29ydGVkIGJ5IHByaW9yaXR5JywgKCkgPT4ge1xuICAgICAgY29uc3QgbWVkaXVtRnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZVRhc2tGcmFnbWVudCgndGFzay0xJywgJ2ltcGxlbWVudGF0aW9uJywgJ2NvbnRleHQnLCAnTWVkaXVtJywgQ29udGV4dFByaW9yaXR5Lk1FRElVTSk7XG4gICAgICBjb25zdCBjcml0aWNhbEZyYWdtZW50ID0gZmFjdG9yeS5jcmVhdGVHbG9iYWxGcmFnbWVudCgncnVsZXMnLCAnQ3JpdGljYWwnLCBDb250ZXh0UHJpb3JpdHkuQ1JJVElDQUwpO1xuICAgICAgY29uc3QgaGlnaEZyYWdtZW50ID0gZmFjdG9yeS5jcmVhdGVHbG9iYWxGcmFnbWVudCgnY29uZmlnJywgJ0hpZ2gnLCBDb250ZXh0UHJpb3JpdHkuSElHSCk7XG5cbiAgICAgIGNvbGxlY3Rpb24uYWRkKG1lZGl1bUZyYWdtZW50KTtcbiAgICAgIGNvbGxlY3Rpb24uYWRkKGNyaXRpY2FsRnJhZ21lbnQpO1xuICAgICAgY29sbGVjdGlvbi5hZGQoaGlnaEZyYWdtZW50KTtcblxuICAgICAgY29uc3Qgc29ydGVkRnJhZ21lbnRzID0gY29sbGVjdGlvbi5nZXRTb3J0ZWRCeVByaW9yaXR5KCk7XG4gICAgICBleHBlY3Qoc29ydGVkRnJhZ21lbnRzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3Qoc29ydGVkRnJhZ21lbnRzWzBdKS50b0JlKGNyaXRpY2FsRnJhZ21lbnQpO1xuICAgICAgZXhwZWN0KHNvcnRlZEZyYWdtZW50c1sxXSkudG9CZShoaWdoRnJhZ21lbnQpO1xuICAgICAgZXhwZWN0KHNvcnRlZEZyYWdtZW50c1syXSkudG9CZShtZWRpdW1GcmFnbWVudCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb2xsZWN0aW9uIE1haW50ZW5hbmNlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZW1vdmUgZXhwaXJlZCBmcmFnbWVudHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBleHBpcmVkRnJhZ21lbnQgPSBmYWN0b3J5LmNyZWF0ZVRhc2tGcmFnbWVudChcbiAgICAgICAgJ3Rhc2stMScsIFxuICAgICAgICAnaW1wbGVtZW50YXRpb24nLCBcbiAgICAgICAgJ2NvbnRleHQnLCBcbiAgICAgICAgJ0V4cGlyZWQgY29udGVudCcsIFxuICAgICAgICBDb250ZXh0UHJpb3JpdHkuTUVESVVNXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBNYW51YWxseSBzZXQgY3JlYXRlZCB0aW1lIHRvIG1ha2UgaXQgZXhwaXJlZFxuICAgICAgZXhwaXJlZEZyYWdtZW50Lm1ldGFkYXRhLmNyZWF0ZWQgPSBEYXRlLm5vdygpIC0gKDIgKiA2MCAqIDYwICogMTAwMCk7IC8vIDIgaG91cnMgYWdvXG4gICAgICBleHBpcmVkRnJhZ21lbnQubWV0YWRhdGEudHRsID0gNjAgKiA2MCAqIDEwMDA7IC8vIDEgaG91ciBUVExcblxuICAgICAgY29uc3QgdmFsaWRGcmFnbWVudCA9IGZhY3RvcnkuY3JlYXRlR2xvYmFsRnJhZ21lbnQoJ3J1bGVzJywgJ1ZhbGlkIGNvbnRlbnQnKTtcblxuICAgICAgY29sbGVjdGlvbi5hZGQoZXhwaXJlZEZyYWdtZW50KTtcbiAgICAgIGNvbGxlY3Rpb24uYWRkKHZhbGlkRnJhZ21lbnQpO1xuXG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5zaXplKCkpLnRvQmUoMik7XG5cbiAgICAgIGNvbnN0IHJlbW92ZWRDb3VudCA9IGNvbGxlY3Rpb24ucmVtb3ZlRXhwaXJlZChmYWN0b3J5KTtcbiAgICAgIGV4cGVjdChyZW1vdmVkQ291bnQpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5zaXplKCkpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXQodmFsaWRGcmFnbWVudC5pZCkpLnRvQmUodmFsaWRGcmFnbWVudCk7XG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXQoZXhwaXJlZEZyYWdtZW50LmlkKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNhbGN1bGF0ZSB0b3RhbCB0b2tlbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmcmFnbWVudDEgPSBmYWN0b3J5LmNyZWF0ZUdsb2JhbEZyYWdtZW50KCdydWxlcycsICdDb250ZW50IDEnKTtcbiAgICAgIGNvbnN0IGZyYWdtZW50MiA9IGZhY3RvcnkuY3JlYXRlR2xvYmFsRnJhZ21lbnQoJ2NvbmZpZycsICdDb250ZW50IDInKTtcblxuICAgICAgY29sbGVjdGlvbi5hZGQoZnJhZ21lbnQxKTtcbiAgICAgIGNvbGxlY3Rpb24uYWRkKGZyYWdtZW50Mik7XG5cbiAgICAgIGNvbnN0IHRvdGFsVG9rZW5zID0gY29sbGVjdGlvbi5nZXRUb3RhbFRva2VucygpO1xuICAgICAgY29uc3QgZXhwZWN0ZWRUb2tlbnMgPSBmcmFnbWVudDEudG9rZW5Fc3RpbWF0ZSArIGZyYWdtZW50Mi50b2tlbkVzdGltYXRlO1xuICAgICAgZXhwZWN0KHRvdGFsVG9rZW5zKS50b0JlKGV4cGVjdGVkVG9rZW5zKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjbGVhciBhbGwgZnJhZ21lbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZnJhZ21lbnQxID0gZmFjdG9yeS5jcmVhdGVHbG9iYWxGcmFnbWVudCgncnVsZXMnLCAnQ29udGVudCAxJyk7XG4gICAgICBjb25zdCBmcmFnbWVudDIgPSBmYWN0b3J5LmNyZWF0ZUdsb2JhbEZyYWdtZW50KCdjb25maWcnLCAnQ29udGVudCAyJyk7XG5cbiAgICAgIGNvbGxlY3Rpb24uYWRkKGZyYWdtZW50MSk7XG4gICAgICBjb2xsZWN0aW9uLmFkZChmcmFnbWVudDIpO1xuICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uc2l6ZSgpKS50b0JlKDIpO1xuXG4gICAgICBjb2xsZWN0aW9uLmNsZWFyKCk7XG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5zaXplKCkpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXRBbGwoKSkudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGNvbGxlY3Rpb24gb3BlcmF0aW9ucycsICgpID0+IHtcbiAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnNpemUoKSkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmdldEFsbCgpKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXRCeVR5cGUoJ2dsb2JhbC1ydWxlcycpKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXRCeVByaW9yaXR5KENvbnRleHRQcmlvcml0eS5ISUdIKSkudG9IYXZlTGVuZ3RoKDApO1xuICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uZ2V0VG90YWxUb2tlbnMoKSkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnJlbW92ZUV4cGlyZWQoZmFjdG9yeSkpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGR1cGxpY2F0ZSBhZGRpdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGZhY3RvcnkuY3JlYXRlR2xvYmFsRnJhZ21lbnQoJ3J1bGVzJywgJ1Rlc3QgY29udGVudCcpO1xuICAgICAgXG4gICAgICBjb2xsZWN0aW9uLmFkZChmcmFnbWVudCk7XG4gICAgICBjb2xsZWN0aW9uLmFkZChmcmFnbWVudCk7IC8vIEFkZCBzYW1lIGZyYWdtZW50IGFnYWluXG4gICAgICBcbiAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnNpemUoKSkudG9CZSgxKTsgLy8gU2hvdWxkIHN0aWxsIGJlIDEsIG5vdCAyXG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9